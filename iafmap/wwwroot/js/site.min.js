function detectBrowser(){var t=navigator.userAgent,n=document.getElementById("map_canvas");t.indexOf("iPhone")!=-1||t.indexOf("Android")!=-1?(n.style.width="100%",n.style.height="100%"):(n.style.width="600px",n.style.height="800px")}function getWindowHeight(){return window.self&&self.innerHeight?self.innerHeight:document.documentElement&&document.documentElement.clientHeight?document.documentElement.clientHeight:0}function bound(n,t,i){return t!=null&&(n=Math.max(n,t)),i!=null&&(n=Math.min(n,i)),n}var _basejs={};_basejs.Object={extend:function(n,t){var i,r,u;if(n=n||{},t){for(i in t)r=t[i],r!==undefined&&(n[i]=r);u=typeof Event=="function"&&t instanceof window.Event;!u&&t.hasOwnProperty&&t.hasOwnProperty("toString")&&(n.toString=t.toString)}return n},create:function(){for(var u=function(){arguments&&arguments[0]!=function(){}&&this.initialize.apply(this,arguments)},t,i,r={},n=0,f=arguments.length;n<f;++n)typeof arguments[n]=="function"?(n==0&&f>1&&(i=arguments[n].prototype.initialize,arguments[n].prototype.initialize=function(){},r=new arguments[n],i===undefined?delete arguments[n].prototype.initialize:arguments[n].prototype.initialize=i),t=arguments[n].prototype):t=arguments[n],_basejs.Object.extend(r,t);return u.prototype=r,u}};_basejs.Function={bind:function(n,t){var i=Array.prototype.slice.apply(arguments,[2]);return function(){var r=i.concat(Array.prototype.slice.apply(arguments,[0]));return n.apply(t,r)}},bindAsEventListener:function(n,t){return function(i){return n.call(t,i||window.event)}}};_basejs.Projection={};_basejs.Projection.TILE_SIZE=256;_basejs.Projection.degreesToRadians=function(n){return n*(Math.PI/180)};_basejs.Projection.radiansToDegrees=function(n){return n/(Math.PI/180)};_basejs.Projection.Base=_basejs.Object.create({pixelOrigin:new google.maps.Point(_basejs.Projection.TILE_SIZE/2,_basejs.Projection.TILE_SIZE/2),pixelsPerLonDegree:_basejs.Projection.TILE_SIZE/360,pixelsPerLonRadian:_basejs.Projection.TILE_SIZE/(2*Math.PI),initialize:function(){},fromLatLngToPoint:function(){},fromPointToLatLng:function(){},setMap:function(){}});_basejs.Projection.Euclidean=_basejs.Object.create(_basejs.Projection.Base,{fromLatLngToPoint:function(n,t){var i=t||new google.maps.Point(0,0);return i.x=this.pixelOrigin.x+n.lng()*this.pixelsPerLonDegree,i.y=this.pixelOrigin.y+-1*n.lat()*this.pixelsPerLonDegree,i},fromPointToLatLng:function(n){var t=(n.x-this.pixelOrigin.x)/this.pixelsPerLonDegree,i=-1*(n.y-this.pixelOrigin.y)/this.pixelsPerLonDegree;return new google.maps.LatLng(i,t,!0)}});_basejs.Projection.Mercator=_basejs.Object.create(_basejs.Projection.Base,{fromLatLngToPoint:function(n,t){var u=this.pixelOrigin,i=t||new google.maps.Point(0,0),r;return i.x=u.x+n.lng()*this.pixelsPerLonDegree,r=bound(Math.sin(_basejs.Projection.degreesToRadians(n.lat())),-.9999,.9999),i.y=u.y+.5*Math.log((1+r)/(1-r))*-this.pixelsPerLonRadian,i},fromPointToLatLng:function(n){var t=this.pixelOrigin,i=(n.x-t.x)/this.pixelsPerLonDegree,r=(n.y-t.y)/-this.pixelsPerLonRadian,u=_basejs.Projection.radiansToDegrees(2*Math.atan(Math.exp(r))-Math.PI/2);return new google.maps.LatLng(u,i)}});_basejs.Projection.Custom=_basejs.Object.create(_basejs.Projection.Base,{pixelOrigin:[],pixelsPerLonDegree:[],pixelsPerLonRadian:[],tileBounds:[],imageDimension:65536,isWrapped:!0,maxZoom:6,_map:null,initialize:function(){for(var t,n=_basejs.Projection.TILE_SIZE,i=1,r=0;r<this.maxZoom;r++)t=n/2,this.pixelsPerLonDegree.push(n/360),this.pixelOrigin.push(new google.maps.Point(t,t)),this.tileBounds.push(i),n*=2,i*=2},fromLatLngToPoint:function(n){var t=this._map.getZoom(),i=Math.round(this.pixelOrigin[t].x+n.lng()*this.pixelsPerLonDegree[t]),r=Math.round(this.pixelOrigin[t].y+-2*n.lat()*this.pixelsPerLonDegree[t]);return new google.maps.Point(i,r)},fromPixelToLatLng:function(n,t){var i=this._map.getZoom(),r=(n.x-this.pixelOrigin[i].x)/this.pixelsPerLonDegree[i],u=-.5*(n.y-this.pixelOrigin[i].y)/this.pixelsPerLonDegree[i];return new google.maps.LatLng(u,r,t)},setMap:function(n){this._map=n}});_basejs.Control={};_basejs.Control.Info=_basejs.Object.create({_map:null,_div:null,_controlUI:null,_controlText:null,_overlayView:null,initialize:function(n,t){this._map=t;this._div=n;this._div.style.padding="5px";this._overlayView=new google.maps.OverlayView;this._overlayView.setMap(this._map);this._overlayView.draw=function(){this.ready||(this.ready=!0,google.maps.event.trigger(this,"ready"))};var i=_basejs.Function.bindAsEventListener(this.onMouseOver,this);google.maps.event.addListener(this._map,"mousemove",i);this.draw()},draw:function(){this._controlUI=document.createElement("div");this._controlUI.style.backgroundColor="white";this._controlUI.style.borderStyle="solid";this._controlUI.style.borderWidth="2px";this._controlUI.style.width="300px";this._controlUI.style.height="200px";this._controlUI.style.textAlign="left";this._div.appendChild(this._controlUI);this._controlText=document.createElement("div");this._controlText.style.fontFamily="Arial,sans-serif";this._controlText.style.fontSize="12px";this._controlText.style.paddingLeft="4px";this._controlText.style.paddingRight="4px";this._controlUI.appendChild(this._controlText)},setContent:function(n){this._controlText.innerHTML=n},onMouseOver:function(n){var t=n.latLng,u=1<<this._map.getZoom(),o=this._map.getProjection(),i=o.fromLatLngToPoint(t),f=this._overlayView.getProjection().fromLatLngToContainerPixel(t),r=new google.maps.Point(i.x*u,i.y*u),e=new google.maps.Point(Math.floor(r.x/_basejs.Projection.TILE_SIZE),Math.floor(r.y/_basejs.Projection.TILE_SIZE)),s=["IAF Map","LatLng: "+t.lat()+" , "+t.lng(),"World Coordinate: "+i.x+" , "+i.y,"Pixel Coordinate: "+Math.floor(r.x)+" , "+Math.floor(r.y),"Pixel Coordinate ViewPort: "+f.x+", "+f.y,"Tile Coordinate: "+e.x+" , "+e.y+" at Zoom Level: "+this._map.getZoom()].join("<br>");this.setContent(s)}});_basejs.Control.StopDrag=_basejs.Object.create({_sizeMap:[],_sizeContainer:null,_map:null,_allowedBounds:null,initialize:function(n,t){var i,r,u;this._map=t;this._sizeMap.push(new google.maps.Size(2047,1600));this._sizeMap.push(new google.maps.Size(2047,1600));this._sizeMap.push(new google.maps.Size(2047,1600));this._sizeMap.push(new google.maps.Size(2047,1650));this._sizeMap.push(new google.maps.Size(4095,3304));i=_basejs.Function.bindAsEventListener(this.onCenterChanged,this);google.maps.event.addListener(this._map,"center_changed",i);r=_basejs.Function.bindAsEventListener(this.onZoomChanged,this);google.maps.event.addListener(this._map,"zoom_changed",r);u=_basejs.Function.bindAsEventListener(this.verifyLimitBounds,this);google.maps.event.addListener(this._map,"idle",u)},onCenterChanged:function(){if(!this._allowedBounds.contains(this._map.getCenter())){var i=this._map.getCenter(),n=i.lng(),t=i.lat(),r=this._allowedBounds.getNorthEast().lng(),u=this._allowedBounds.getNorthEast().lat(),f=this._allowedBounds.getSouthWest().lng(),e=this._allowedBounds.getSouthWest().lat();n<f&&(n=f);n>r&&(n=r);t<e&&(t=e);t>u&&(t=u);this._map.setCenter(new google.maps.LatLng(t,n))}},verifyLimitBounds:function(){var n;this._sizeContainer==null&&(n=this._map.getDiv(),this._sizeContainer=new google.maps.Size($(n).width(),$(n).height()));var r=this._map.getProjection(),u=this._map.getZoom(),i=1<<this._map.getZoom(),f=this._sizeContainer.width/2/i,e=(this._sizeMap[u].height-(this._sizeContainer.height/2+10))/i,o=new google.maps.Point(f,e),t=r.fromPointToLatLng(o),s=new google.maps.LatLng(t.lat()*-1,t.lng()*-1);this._allowedBounds=new google.maps.LatLngBounds(t,s);this.onCenterChanged()},onZoomChanged:function(){this.verifyLimitBounds()}});_basejs.MapType=_basejs.Object.create({name:"IAF",alt:"IAF Map Type",tileSize:new google.maps.Size(256,256),maxZoom:4,minZoom:3,initialize:function(){},getTile:function(n,t,i){var o=i.createElement("img"),u="",r=1<<t,f=n.x,e=n.y,s;if(e<0||e>=r||f<0||f>=r)return o.src="http://maps.gstatic.com/mapfiles/transparent.png",o;for(s=0,u="t";s<t;s++)r=r/2,e<r?f<r?u+="q":(u+="r",f-=r):f<r?(u+="t",e-=r):(u+="s",f-=r,e-=r);return o.src=["images/tiles/",u,".jpg"].join(""),o},tileToQuadKey:function(n,t,i){for(var r,f,e=[],u=i;u>0;u--)r="0",f=1<<u-1,(n&f)!=0&&r++,(t&f)!=0&&(r++,r++),e.push(r);return e.join("")}});_basejs.Map=_basejs.Object.create({_map:null,_mapType:null,_div:null,_markersArray:[],initialize:function(n,t){var i,r;this._div=n;this._mapType=new _basejs.MapType;i={backgroundColor:"#000",zoom:3,center:new google.maps.LatLng(0,0),mapTypeId:"IAF",disableDefaultUI:!0,navigationControl:!0,zoomControl:!0,zoomControlOptions:{style:google.maps.ZoomControlStyle.DEFAULT}};typeof t!="undefined"&&_basejs.Object.extend(i,t);this.resizeDiv();this._map=new google.maps.Map(this._div,i);this._map.mapTypes.set("IAF",this._mapType);this._map.setMapTypeId("IAF");google.maps.event.trigger(this._map,"resize");r=_basejs.Function.bindAsEventListener(function(n){this.addMarker(n.latLng,this._map)},this);google.maps.event.addListener(this._map,"click",r);this.addControls()},addControls:function(){var t=document.createElement("div"),i,n,r;t.index=1;i=new _basejs.Control.StopDrag(t,this._map);this._map.controls[google.maps.ControlPosition.TOP_LEFT].push(t);n=document.createElement("div");n.index=1;r=new _basejs.Control.Info(n,this._map);this._map.controls[google.maps.ControlPosition.TOP_RIGHT].push(n)},addMarker:function(n,t){var r=new google.maps.Marker({position:n,draggable:!1,map:t}),i;this._markersArray.push(r);i=new google.maps.InfoWindow;i.setContent(this.createInfoWindowContent(n));i.setPosition(n);google.maps.event.addListener(r,"click",function(){i.open(t,r)})},createInfoWindowContent:function(n){return"latitude: "+n.lat().toString()+"; longitude: "+n.lng().toString()},resizeDiv:function(){for(var t,i=0,n=this._div;n!=null;n=n.offsetParent)i+=n.offsetTop;t=getWindowHeight()-i-16;t>=0&&(this._div.style.height=t+"px")}}),function(){$(document).ready(function(){var n=new _basejs.Map(document.getElementById("map_main"))})}();